<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- TODO: Campos:
        -Descrição: input text
        -Situação (pendente/finalizada): radio button

        Requisitos:

        -Cadastrar uma tarefa
        -Exibir listagem de tarefas cadastras (descrição e situação)
        -Título do TODO list como one databind (variável no escopo para apresentar na view)
        -Excluir uma tarefa cadastrada
        -Editar uma tarefa cadastrada.
        -Botão que exibe somente as tarefas finalizadas
        -Tarefas pendentes devem possuir cor vermelha


        Desafio extra:

        -Contador de total de tarefas por situação (pendente, finalizada e todas)
        -Armazenar em localstorage
        -Poder cadastrar mais situações
        -Poder carregar dinamicamente mais situações na view (regra: se houver mais de 2 situações o elemento se torna um combobox)
    -->
    <link rel="stylesheet" href="assets/libs/bootstrap/dist/css/bootstrap.min.css">
    <title>Angular CRUD</title>

    <style media="screen">
        @media (min-width: 768px) {
            .container {
            max-width: 730px;
            }
        }
        [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
            display: none !important;
        }
    </style>
</head>
<body>
    <div ng-app="ToDo" class="container">
        <div class="page-header"><h1>Angular CRUD</h1></div>
        <div class="row">
            <div ng-controller="ToDoController">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Tarefa</h3>
                    </div>
                    <div class="panel-body">
                        <form class="form" name="myForm" novalidate ng-submit="add()">
                            <input class="form-control" type="text" placeholder="Descrição" name="texto" ng-model="setData.desc" ng-required="true">
                            <br>
                            <div ng-repeat="situation in getSituation track by $index">
                                <div class="input-group">
                                    <input ng-model="setData.situation" type="radio" name="{{situation.nome}}" id="{{situation.nome}}" autocomplete="off" value="{{situation.nome}}">
                                    &nbsp;
                                    <label for="{{situation.nome}}" ng-cloak>{{situation.nome}}</label>
                                </div>
                                <button class="btn btn-danger"  ng-click="deleteSit(situation.id)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></button>
                                <br>
                            </div>
                            <div class="input-group">
                                <input class="btn btn-default" type="submit" value="Salvar">
                            </div>
                        </form>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Situação</h3>
                    </div>
                    <div class="panel-body">
                        <form class="form-inline" name="formSituation" ng-submit="addSit()">
                            <input ng-model="setSituation.nome" type="text" class="form-control" placeholder="Inserir Situação">
                            <input class="btn btn-default" type="submit" value="+">
                        </form>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title">Filtro</h3>
                    </div>
                    <div class="panel-body">
                        <input ng-model="finalizadas" type="checkbox" id="option3" autocomplete="off" value="false">
                        <label for="option3">Somente Finalizadas</label>
                        <br>
                        <br>
                        <div ng-repeat="data in getSituation">
                            <span ng-cloak><b>{{data.nome}}:</b> {{getStatus(data.nome)}}</span>
                        </div>
                        <br>
                        <span ng-cloak><b>Total:</b> {{getData.length}}</span>
                    </div>
                </div>

                <div class="panel panel-default">
                    <table class="table">
                        <tr>
                            <th>
                                Descrição
                            </th>
                            <th>
                                Situação
                            </th>
                            <th width="60px">
                                Editar
                            </th>
                            <th width="60px">
                                Excluir
                            </th>
                        </tr>
                        <tr ng-repeat="data in getData | filter: (finalizadas || '') && 'Finalizada' track by $index" ng-cloak>
                            <td>
                                <b>{{data.desc}}</b><br>
                            </td>
                            <td>
                                <cite ng-style="{'color': data.situation=='Pendente' ? 'red' :''}">{{data.situation}}</cite>
                            </td>
                            <td>
                                <button class="btn btn-success" ng-click="edit(data.id)"><span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Editar</cite>
                            </td>
                            <td>
                                <button class="btn btn-danger"  ng-click="delete(data.id)"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Excluir</cite>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- LIBS -->
    <script src="assets/libs/angular/angular.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="assets/libs/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- SCRIPTS ANGULAR -->
    <script src="assets/app/app.js"></script>
</body>
</html>
